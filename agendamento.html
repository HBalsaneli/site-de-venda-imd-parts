<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agendamento & Pagamento Premium – IMD Parts</title>

<style>

/* ===========================
   RESET E CONFIGURAÇÕES GERAIS
=========================== */

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    font-family: 'Segoe UI', Arial, sans-serif;
    background: linear-gradient(135deg,#0f0f0f,#1c1c1c);
    color:white;
}

h1,h2,h3{
    font-weight:300;
    letter-spacing:2px;
}

.container{
    max-width:1200px;
    margin:60px auto;
    padding:40px;
}

/* ===========================
   HEADER
=========================== */

header{
    background:#000;
    padding:30px;
    text-align:center;
    border-bottom:1px solid #222;
}

header h1{
    font-size:26px;
}

/* ===========================
   CARDS
=========================== */

.section-title{
    margin-bottom:30px;
    text-align:center;
}

.card{
    background:#181818;
    padding:30px;
    border-radius:18px;
    border:1px solid #222;
    box-shadow:0 15px 45px rgba(0,0,0,0.6);
    margin-bottom:50px;
    transition:0.4s;
}

.card:hover{
    transform:translateY(-5px);
    border-color:#444;
}

/* ===========================
   FORMULÁRIOS
=========================== */

form{
    display:flex;
    flex-direction:column;
    gap:18px;
}

input, select{
    padding:14px;
    border-radius:8px;
    border:1px solid #333;
    background:#111;
    color:white;
    font-size:14px;
}

input:focus, select:focus{
    outline:none;
    border-color:#777;
}

button{
    background:white;
    color:black;
    padding:14px;
    border-radius:8px;
    border:none;
    cursor:pointer;
    font-weight:600;
    transition:0.3s;
}

button:hover{
    background:#ddd;
}

.success{
    color:#00ff99;
    margin-top:10px;
}

.error{
    color:#ff4d4d;
    margin-top:10px;
}

/* ===========================
   GRID
=========================== */

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(450px,1fr));
    gap:50px;
}

/* ===========================
   FOOTER
=========================== */

footer{
    background:#000;
    text-align:center;
    padding:30px;
    border-top:1px solid #222;
    margin-top:60px;
}

</style>
</head>
<body>

<header>
<h1>IMD Parts – Sistema Premium de Agendamento</h1>
</header>

<div class="container">

<div class="grid">

<!-- ================= SERVIÇOS ================= -->

<div class="card">
<h2 class="section-title">Agendamento de Serviços</h2>

<form id="formServico">

<input type="text" name="Nome" placeholder="Seu Nome" required>
<input type="tel" name="Telefone" placeholder="Telefone" required>
<input type="text" name="Veiculo" placeholder="Modelo do Veículo" required>

<select name="Servico" required>
<option value="">Selecione o Serviço</option>
<option>Revisão Completa</option>
<option>Diagnóstico Técnico</option>
<option>Troca de Peças</option>
<option>Check-up Premium</option>
</select>

<select name="Data" id="dataServico" required>
<option value="">Selecione a Data</option>
</select>

<select name="Horario" id="horaServico" required>
<option value="">Selecione o Horário</option>
</select>

<button type="submit">Confirmar Serviço</button>

<div id="msgServico"></div>

</form>
</div>

<!-- ================= TEST DRIVE ================= -->

<div class="card">
<h2 class="section-title">Agendamento Test Drive</h2>

<form id="formTestDrive">

<input type="text" name="Nome" placeholder="Seu Nome" required>
<input type="tel" name="Telefone" placeholder="Telefone" required>

<select name="Veiculo" required>
<option value="">Selecione o Veículo</option>
<option>Porsche 963</option>
<option>Audi R8</option>
<option>Audi RS6</option>
<option>Porsche Cayenne</option>
<option>Porsche 911 Turbo S</option>
</select>

<select name="Data" id="dataTD" required>
<option value="">Selecione a Data</option>
</select>

<select name="Horario" id="horaTD" required>
<option value="">Selecione o Horário</option>
</select>

<button type="submit">Agendar Test Drive</button>

<div id="msgTD"></div>

</form>
</div>

</div>
</div>

<footer>
© 2026 IMD Parts Dealerships
</footer>

<script>

/* ===============================
   CONFIGURAÇÃO EMAIL
================================ */

const EMAIL = "souza.helder.2018@gamil.com";

/* ===============================
   FERIADOS 2026
================================ */

const feriados = [
"2026-01-01","2026-04-03","2026-04-21","2026-05-01",
"2026-09-07","2026-10-12","2026-11-02","2026-11-15","2026-12-25"
];

/* ===============================
   GERAR DATAS CORRETAMENTE
================================ */

function gerarDatas(selectId){
    const select = document.getElementById(selectId);

    let inicio = new Date("2026-01-01");
    let fim = new Date("2026-12-31");

    while(inicio <= fim){

        let diaSemana = inicio.getDay();
        let iso = inicio.toISOString().split("T")[0];

        if(diaSemana !== 0 && !feriados.includes(iso)){

            let option = document.createElement("option");
            option.value = iso;

            let formatada =
            iso.split("-").reverse().join("/");

            option.textContent = formatada;

            select.appendChild(option);
        }

        inicio.setDate(inicio.getDate()+1);
    }
}

/* ===============================
   GERAR HORÁRIOS 07h às 21h
================================ */

function gerarHorarios(selectId){

    const select = document.getElementById(selectId);

    for(let h=7; h<=21; h++){

        let hora = (h<10?"0"+h:h)+":00";

        let option = document.createElement("option");
        option.value = hora;
        option.textContent = hora;

        select.appendChild(option);
    }
}

/* ===============================
   ENVIO EMAIL
================================ */

function enviarEmail(dados){

    const form = document.createElement("form");
    form.action = "https://formsubmit.co/" + EMAIL;
    form.method = "POST";

    form.innerHTML = `
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_subject" value="Novo Agendamento IMD Parts">
    <input type="hidden" name="Tipo" value="${dados.tipo}">
    <input type="hidden" name="Nome" value="${dados.nome}">
    <input type="hidden" name="Telefone" value="${dados.telefone}">
    <input type="hidden" name="Veiculo" value="${dados.veiculo}">
    <input type="hidden" name="Servico" value="${dados.servico}">
    <input type="hidden" name="Data" value="${dados.data}">
    <input type="hidden" name="Horario" value="${dados.hora}">
    `;

    document.body.appendChild(form);
    form.submit();
}

/* ===============================
   BLOQUEIO E ENVIO
================================ */

document.getElementById("formServico").onsubmit = function(e){

    e.preventDefault();

    let data = this.Data.value;
    let hora = this.Horario.value;

    let chave = "servico_"+data+"_"+hora;

    if(localStorage.getItem(chave)){
        document.getElementById("msgServico").innerHTML =
        "<div class='error'>Horário já reservado.</div>";
        return;
    }

    localStorage.setItem(chave,"ocupado");

    enviarEmail({
        tipo:"Serviço",
        nome:this.Nome.value,
        telefone:this.Telefone.value,
        veiculo:this.Veiculo.value,
        servico:this.Servico.value,
        data:data,
        hora:hora
    });
};

document.getElementById("formTestDrive").onsubmit = function(e){

    e.preventDefault();

    let data = this.Data.value;
    let hora = this.Horario.value;
    let veiculo = this.Veiculo.value;

    let chave = "td_"+veiculo+"_"+data+"_"+hora;

    if(localStorage.getItem(chave)){
        document.getElementById("msgTD").innerHTML =
        "<div class='error'>Horário já reservado para este veículo.</div>";
        return;
    }

    localStorage.setItem(chave,"ocupado");

    enviarEmail({
        tipo:"Test Drive",
        nome:this.Nome.value,
        telefone:this.Telefone.value,
        veiculo:veiculo,
        servico:"Test Drive",
        data:data,
        hora:hora
    });
};

/* ===============================
   INICIAR
================================ */

window.onload = function(){

    gerarDatas("dataServico");
    gerarDatas("dataTD");

    gerarHorarios("horaServico");
    gerarHorarios("horaTD");
};

</script>

</body>
</html>
