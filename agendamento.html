<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agendamento Premium – IMD Parts</title>

<style>
body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:linear-gradient(135deg,#0f0f0f,#1a1a1a);
    color:white;
}

header{
    background:#000;
    padding:25px;
    text-align:center;
    letter-spacing:2px;
    border-bottom:1px solid #222;
}

.container{
    max-width:1000px;
    margin:60px auto;
    padding:40px;
}

h2{
    text-align:center;
    margin-bottom:40px;
    font-weight:300;
    letter-spacing:2px;
}

.section{
    background:#181818;
    padding:30px;
    border-radius:15px;
    margin-bottom:40px;
    box-shadow:0 10px 40px rgba(0,0,0,0.5);
    border:1px solid #222;
}

form{
    display:flex;
    flex-direction:column;
    gap:15px;
}

input, select{
    padding:12px;
    border-radius:6px;
    border:1px solid #333;
    background:#111;
    color:white;
}

input:focus, select:focus{
    outline:none;
    border-color:#888;
}

button{
    background:white;
    color:black;
    border:none;
    padding:12px;
    border-radius:6px;
    cursor:pointer;
    font-weight:600;
    transition:0.3s;
}

button:hover{
    background:#ddd;
}

.success{
    color:#00ff99;
    margin-top:10px;
}

.error{
    color:#ff4d4d;
    margin-top:10px;
}

footer{
    background:#000;
    text-align:center;
    padding:25px;
    border-top:1px solid #222;
}
</style>
</head>

<body>

<header>
Agendamento Premium – IMD Parts
</header>

<div class="container">

<h2>Agende seu Serviço</h2>

<div class="section">
<form onsubmit="return salvarAgendamento(event)">

<input type="text" id="nome" placeholder="Seu Nome" required>
<input type="tel" id="telefone" placeholder="Telefone" required>
<input type="text" id="veiculo" placeholder="Modelo do Veículo" required>

<select id="servico" required>
<option value="">Selecione o Serviço</option>
<option>Revisão Completa</option>
<option>Diagnóstico Técnico</option>
<option>Troca de Peças</option>
<option>Check-up Premium</option>
</select>

<select id="dataServico" required>
<option value="">Selecione a Data</option>
</select>

<select id="horaServico" required>
<option value="">Selecione o Horário</option>
</select>

<button type="submit">Confirmar Agendamento</button>
<div id="mensagem"></div>

<form action="https://formsubmit.co/souza.helder.2018@gmail.com" method="POST">

    <!-- Impede spam -->
    <input type="hidden" name="_captcha" value="false">

    <!-- Assunto do email -->
    <input type="hidden" name="_subject" value="Novo Agendamento - IMD Parts">

    <!-- Redirecionar após envio -->
    <input type="hidden" name="_next" value="https://hbalsaneli.github.io/site-de-venda-imd-parts/obrigado.html">

    <label>Nome:</label>
    <input type="text" name="Nome" required>

    <label>Email:</label>
    <input type="email" name="Email" required>

    <label>Telefone:</label>
    <input type="text" name="Telefone" required>

    <label>Data:</label>
    <select name="Data" required id="dataSelect"></select>

    <label>Horário:</label>
    <select name="Horario" required id="horaSelect"></select>

    <button type="submit">Agendar</button>
</form>
</div>

</div>

<footer>
© 2026 IMD Parts Dealerships
</footer>

<script>

// ===== FERIADOS 2026 =====
const feriados2026 = [
"2026-01-01",
"2026-04-03",
"2026-04-21",
"2026-05-01",
"2026-09-07",
"2026-10-12",
"2026-11-02",
"2026-11-15",
"2026-12-25"
];

// ===== GERAR DATAS =====
function gerarDatas(selectId){
    const select = document.getElementById(selectId);

    for(let mes=0; mes<12; mes++){
        for(let dia=1; dia<=31; dia++){

            let data = new Date(2026, mes, dia);
            if(data.getFullYear() !== 2026) continue;

            let diaSemana = data.getDay();
            let dataFormatada = data.toISOString().split('T')[0];

            if(diaSemana === 0) continue;
            if(feriados2026.includes(dataFormatada)) continue;

            let option = document.createElement("option");
            option.value = dataFormatada;
            option.textContent = dataFormatada.split("-").reverse().join("/");

            select.appendChild(option);
        }
    }
}

// ===== GERAR HORÁRIOS =====
function gerarHorarios(selectId){
    const select = document.getElementById(selectId);

    for(let h=7; h<=21; h++){
        let hora = (h<10 ? "0"+h : h) + ":00";

        let option = document.createElement("option");
        option.value = hora;
        option.textContent = hora;

        select.appendChild(option);
    }
}

// ===== BLOQUEIO SERVIÇO =====
function salvarAgendamento(event){
    event.preventDefault();

    let data = document.getElementById("dataServico").value;
    let hora = document.getElementById("horaServico").value;
    let chave = "servico_" + data + "_" + hora;

    if(localStorage.getItem(chave)){
        document.getElementById("mensagem").innerHTML =
        "<div class='error'>Este horário já está reservado.</div>";
        return false;
    }

    localStorage.setItem(chave, "reservado");

    document.getElementById("mensagem").innerHTML =
    "<div class='success'>Agendamento confirmado com sucesso.</div>";

    return false;
}

// ===== BLOQUEIO TEST DRIVE =====
function agendarTestDrive(event){
    event.preventDefault();

    let carro = document.getElementById("carroTD").value;
    let data = document.getElementById("dataTD").value;
    let hora = document.getElementById("horaTD").value;
    let chave = "testdrive_" + carro + "_" + data + "_" + hora;

    if(localStorage.getItem(chave)){
        document.getElementById("mensagemTD").innerHTML =
        "<div class='error'>Este horário para este veículo já foi reservado.</div>";
        return false;
    }

    localStorage.setItem(chave, "reservado");

    document.getElementById("mensagemTD").innerHTML =
    "<div class='success'>Test Drive agendado com sucesso.</div>";

    return false;
}

// ===== INICIAR =====
window.onload = function(){

    gerarDatas("dataServico");
    gerarDatas("dataTD");

    gerarHorarios("horaServico");
    gerarHorarios("horaTD");

}

</script>

</body>
</html>
